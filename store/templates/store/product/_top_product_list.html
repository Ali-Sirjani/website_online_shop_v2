{% load i18n %}
{% load product_temp_filters %}

<!-- Content for Special Page -->
<div class="container mt-4">
    <a id="btnGroupDrop2" type="button" class="astext mb-3"
       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {% trans 'sort' %}
    </a>

    <div class="dropdown-menu" aria-labelledby="btnGroupDrop2">
        {% for name, num in sort_dict.items %}
            <a class="dropdown-item text-right"
               href="?sort={{ num }}&{{ request.GET|remove_obsolete_sorts }}"><h4
                    class="mm-text">{{ name }}</h4></a>
        {% endfor %}
    </div>

    <div>
        <!-- Display the filters -->
        <a href="" id="showFormLink">{% trans 'Show Filters' %}</a>

        {% if params %}
            {% if not params in request.GET %}
                <form method="get" id="filterForm" class="mt-3" style="display: none;">
                    {{ filter.form.as_p }}
                    <input type="hidden" name="q" value="{{ params }}">
                    <button type="submit" class="btn btn-danger"
                            style="padding: 10px 10px;">{% trans 'Apply Filters' %}</button>
                </form>
            {% endif %}

        {% else %}
            <form method="get" id="filterForm" class="mt-3" style="display: none;">
                {{ filter.form.as_p }}
                    <button type="submit" class="btn btn-danger"
                            style="padding: 6px 8px;">{% trans 'Apply Filters' %}</button>
            </form>
        {% endif %}
    </div>

    <p>{% trans 'Showing' %} {{ page_obj.start_index }}-{{ page_obj.end_index }} {% trans 'of' %} {{ page_obj.paginator.count }}</p>

</div>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    $(document).ready(function () {
        $("#showFormLink").click(function (e) {
            e.preventDefault();
            $("#filterForm").toggle();
        });
    });
</script>
